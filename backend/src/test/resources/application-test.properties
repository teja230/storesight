# Test configuration for Spring Boot tests
spring.application.name=storesight-backend-test

# Database - Use H2 in-memory database for tests
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver

# JPA/Hibernate - Optimized for testing
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.transaction.jta.platform=org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.database=h2

# Disable Redis and Flyway for tests
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration

# Session configuration for tests
spring.session.store-type=none
spring.session.timeout=10m

# Flyway - Disable for tests (use Hibernate DDL)
spring.flyway.enabled=false

# External services - Use dummy values for tests
sendgrid.api-key=${SENDGRID_API_KEY:test_sendgrid_key}
twilio.account_sid=${TWILIO_ACCOUNT_SID:test_twilio_sid}
twilio.auth_token=${TWILIO_AUTH_TOKEN:test_twilio_token}
twilio.from_number=${TWILIO_FROM_NUMBER:+1234567890}

# Shopify - Use test values
shopify.api.key=${SHOPIFY_API_KEY:test_key}
shopify.api.secret=${SHOPIFY_API_SECRET:test_secret}
shopify.scopes=read_products,read_orders,read_customers,read_inventory
shopify.redirect_uri=${SHOPIFY_REDIRECT_URI:https://api.shopgaugeai.com/api/auth/shopify/callback}

# Discovery services - Disable for tests
discovery.enabled=false
discovery.serpapi.key=${SERPAPI_KEY:test_serpapi_key}
discovery.serpapi.max-results=${SERPAPI_MAX_RESULTS:3}

# Logging - Reduced verbosity for tests
logging.level.org.springframework=WARN
logging.level.com.storesight=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.org.testcontainers=INFO
logging.level.org.flywaydb=INFO

# Server
server.port=0

# Frontend URL
frontend.url=http://localhost:3000 